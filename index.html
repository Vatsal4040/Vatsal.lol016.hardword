<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;800;900&display=swap" rel="stylesheet">

<title>HARDWORD</title>

<style>
/* ===== GLOBAL ===== */
html, body {
    height: 100%;
    margin: 0;
    background: #000;
    color: #fff;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    overflow: hidden;
}

/* ===== LANDING ===== */
#landing {
    position: fixed;
    inset: 0;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

#landing h1 {
    font-size: 3.5rem;
    letter-spacing: 6px;
    margin: 0 0 20px;
}

#landing button {
    background: #fff;
    color: #000;
    border: none;
    padding: 14px 36px;
    font-size: 1.1rem;
    font-weight: bold;
    border-radius: 999px;
    cursor: pointer;
}

/* ===== APP GRID ===== */
#game-app {
    max-width: 480px;
    margin: 0 auto;
    height: 100%;
    display: grid;
    grid-template-rows: auto minmax(0, 1fr) 12px;
    padding: 12px 16px;
    box-sizing: border-box;
}

/* ===== HEADER ===== */
.header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.title h1 {
    margin: 0;
    font-size: 2.2rem;
    letter-spacing: 5px;
    line-height: 1.1;
}

/* ===== RULES ===== */
.tooltip {
    position: relative;
    cursor: pointer;
}

.tooltip-box {
    position: absolute;
    top: 140%;
    right: 0;
    width: 260px;
    background: #111;
    border: 1px solid #333;
    border-radius: 8px;
    padding: 12px;
    font-size: 0.85rem;
    color: #ddd;
    display: none;
}

.tooltip:hover .tooltip-box {
    display: block;
}

/* ===== ANSWER + NEXT ===== */
.answer-bar {
    margin-top: 6px;
    font-size: 0.95rem;
    color: #aaa;
    min-height: 18px;
}

.answer-bar strong {
    color: #fff;
}

.next-btn {
    background: #1f1f1f;
    border: 1px solid #3a3a3a;
    color: #fff;
    padding: 6px 16px;
    border-radius: 999px;
    font-size: 12px;
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.next-btn.show {
    opacity: 1;
    pointer-events: auto;
}

/* ===== PLAY AREA ===== */
.game-container {
    display: grid;
    place-items: center;
}

/* ===== BOARD ===== */
.guess-board {
    display: grid;
    grid-template-rows: repeat(8, 1fr);
    gap: 6px;
    margin-bottom: 12px;
}

.guess-row {
    display: grid;
    grid-template-columns: repeat(4, 44px) 70px;
    gap: 8px;
    align-items: center;
}

.letter-box {
    height: clamp(40px, 6vh, 44px);
    border-radius: 8px;
    background: #070707;
    border: 1px solid #1a1a1a;

    font-size: clamp(18px, 3.2vh, 20px);
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;

    color: #d8d8d8;
}


/* ===== KEYBOARD MEMORY (CRITICAL) ===== */
.key.used {
    background: #111;
    color: #555;
}

/* ===== SCORE ===== */
.score-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}

/* ===== SCORE (PRIMARY SIGNAL) ===== */
.score {
    width: 42px;
    height: 42px;

    border-radius: 50%;
    border: 2px solid #555;

    display: flex;
    align-items: center;
    justify-content: center;

    font-size: 20px;
    font-weight: 800;
    line-height: 1;

    color: #fff;
    background: #0d0d0d;
}
/* Zero scores must still read as information */
.score:empty {
    border-color: #444;
    background: #0a0a0a;
}

.green {
    background: #6aaa64;
    color: #000;
    border: none;
}

.yellow {
    background: #c9b458;
    color: #000;
    border: none;
}


/* ===== KEYBOARD ===== */
.keyboard {
    width: 100%;
    max-width: 420px;
}

.krow {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-bottom: 6px;
}

.key {
    height: clamp(40px, 7vh, 46px);
    min-width: 30px;
    padding: 0 8px;
    background: #2b2b2b;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
}

.key.wide { min-width: 56px; }

/* ===== MOBILE INPUT ===== */
#mobile-input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

</style>
</head>

<body>

<!-- LANDING -->
<div id="landing">
    <h1>HARDWORD</h1>
    <button onclick="startGame()">PLAY</button>
</div>

<!-- GAME -->
<div id="game-app" style="display:none">
    <div class="header">
        <div class="title">
            <h1>HARDWORD</h1>
            <div class="answer-bar" id="answerBar"></div>
        </div>

        <div style="display:flex; gap:10px; align-items:center;">
            <div class="tooltip">?
                <div class="tooltip-box">
                    <strong>How to Play</strong><br><br>
                    Guess the 4-letter word in 8 tries.<br><br>
                    ðŸŸ¢ = correct letter & position<br>
                    ðŸŸ¡ = correct letter, wrong position<br><br>
                    Letters never repeat.
                </div>
            </div>
            <button class="next-btn" id="nextBtn" onclick="nextWordGame()">NEXT WORD</button>
        </div>
    </div>

    <div class="game-container">
        <div>
            <div class="guess-board" id="board"></div>

            <div class="keyboard">
                <div class="krow">
                    <div class="key">Q</div><div class="key">W</div><div class="key">E</div><div class="key">R</div>
                    <div class="key">T</div><div class="key">Y</div><div class="key">U</div><div class="key">I</div>
                    <div class="key">O</div><div class="key">P</div>
                </div>
                <div class="krow">
                    <div class="key">A</div><div class="key">S</div><div class="key">D</div><div class="key">F</div>
                    <div class="key">G</div><div class="key">H</div><div class="key">J</div><div class="key">K</div>
                    <div class="key">L</div>
                </div>
                <div class="krow">
                    <div class="key wide">ENTER</div>
                    <div class="key">Z</div><div class="key">X</div><div class="key">C</div>
                    <div class="key">V</div><div class="key">B</div><div class="key">N</div><div class="key">M</div>
                    <div class="key wide">âŒ«</div>
                </div>
            </div>
        </div>
    </div>
</div>

<input id="mobile-input" type="text" autocapitalize="characters" />

<script>
const WORDS = [
"ABLE","ACID","AGED","ALSO","AREA","ATOM","AUNT","AUTO","BAND","BANK",
"BATH","BEAR","BEND","BIRD","BLOW","BLUE","BOAT","BOND","BOWL","BULK",
"BURN","CALM","CAMP","CARD","CARE","CAST","CHAT","CHIP","CITY","CLUB",
"COAL","COAT","CODE","COLD","CORE","COST","CREW","CROP","CURE","DARK",
"DATA","DATE","DAWN","DEAL","DECK","DESK","DIAL","DIET","DISH","DOOR",
"DOWN","DRAW","DROP","DUAL","DUST","DUTY","EACH","EARN","EAST","ECHO",
"EDGE","EVEN","EXIT","FACE","FACT","FAIR","FALL","FARM","FAST","FATE",
"FEAR","FEED","FILL","FILM","FIND","FIRE","FIRM","FISH","FITS","FIVE",
"FLAT","FLOW","FOOD","FOOT","FORK","FORM","FORT","FOUR","FREE","FUEL",
"FULL","FUND","GAIN","GAME","GATE","GEAR","GIFT","GIRL","GIVE","GLAD",
"GOAL","GOLD","GOLF","GRAY","GROW","HAIR","HALF","HALL","HAND","HANG",
"HARD","HARM","HATE","HAVE","HEAD","HEAT","HELP","HERO","HIDE","HIGH",
"HILL","HIRE","HOLD","HOME","HOPE","HOST","HOUR","HUGE","HUNT","HURT",
"ICON","IDEA","IDLE","INTO","IRON","ITEM","JOIN","JUMP","JURY","JUST",
"KEEN","KEEP","KICK","KIND","KING","KNEE","KNOW","LACK","LADY","LAKE",
"LAND","LANE","LAST","LATE","LEAD","LEFT","LESS","LIFE","LIFT","LIKE",
"LINE","LINK","LIST","LIVE","LOAD","LOAN","LOCK","LONG","LOOK","LORD",
"LOSE","LOSS","LOST","LOUD","LOVE","LUCK","MAIL","MAIN","MAKE","MALE",
"MANY","MASS","MEAL","MEAN","MEAT","MEET","MENU","MILE","MILK","MIND",
"MODE","MOOD","MOON","MORE","MOVE","MUCH","MUST","NAME","NAVY","NEAR",
"NECK","NEED","NEWS","NEXT","NICE","NINE","NONE","NOSE","NOTE","OPEN",
"OVER","PACK","PAGE","PAID","PAIR","PALE","PALM","PARK","PART","PASS",
"PAST","PATH","PEAK","PICK","PIPE","PLAN","PLAY","PLOT","PLUG","PLUS",
"POEM","POET","POLE","POOL","POOR","PORT","POST","PULL","PURE","PUSH",
"RACE","RAIL","RAIN","RANK","RATE","READ","REAL","REST","RICE","RICH",
"RIDE","RING","RISE","RISK","ROAD","ROCK","ROLE","ROLL","ROOF","ROOM",
"ROOT","ROSE","RULE","RUSH","SAFE","SALT","SAND","SAVE","SEAT","SEED",
"SEEK","SEEM","SELL","SEND","SHIP","SHOT","SHOW","SHUT","SICK","SIDE",
"SIGN","SING","SITE","SIZE","SKIN","SLIP","SLOW","SNOW","SOFT","SOIL",
"SOLD","SOLE","SONG","SOON","SORT","SOUL","SPOT","STAR","STAY","STEP",
"STOP","SUIT","SURE","TAKE","TALE","TALK","TALL","TANK","TAPE","TASK",
"TEAM","TEAR","TELL","TERM","TEST","TEXT","THAN","THIN","THIS","TIDE",
"TINY","TONE","TOOL","TOUR","TOWN","TREE","TRIP","TRUE","TURN","TYPE",
"UNIT","UPON","USED","USER","VARY","VAST","VERY","VICE","VIEW","VOTE",
"WAGE","WAIT","WAKE","WALK","WALL","WANT","WARM","WASH","WAVE","WAYS",
"WEAK","WEAR","WEEK","WELL","WIDE","WIFE","WILD","WIND","WINE","WING",
"WIRE","WISH","WITH","WOLF","WOOD","WORK","WORM","YARD","YEAR","ZERO"
].filter(w => new Set(w).size === 4);

const MAX = 8;

let pool = [...WORDS], i = 0;
let target = "", row = 0, guess = "", over = false;

/* âœ… KEYBOARD MEMORY */
let usedLetters = new Set();

function shuffle(a){
    for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
    }
}
shuffle(pool);

function nextWord(){
    if(i>=pool.length){ shuffle(pool); i=0; }
    return pool[i++];
}

function startGame(){
    document.getElementById("landing").style.display="none";
    document.getElementById("game-app").style.display="grid";
    resetGame();
}

function resetGame(){
    target = nextWord();
    row = 0;
    guess = "";
    over = false;

    usedLetters.clear();
    resetKeyboard();

    document.getElementById("answerBar").textContent="";
    document.getElementById("nextBtn").classList.remove("show");
    buildBoard();
}

function nextWordGame(){ resetGame(); }

function buildBoard(){
    const b=document.getElementById("board");
    b.innerHTML="";
    for(let r=0;r<MAX;r++){
        const rowDiv=document.createElement("div");
        rowDiv.className="guess-row";
        for(let c=0;c<4;c++){
            const box=document.createElement("div");
            box.className="letter-box";
            box.id=`c-${r}-${c}`;
            rowDiv.appendChild(box);
        }
        const s=document.createElement("div");
        s.className="score-container";
        s.innerHTML=`<div class="score" id="g-${r}"></div><div class="score" id="y-${r}"></div>`;
        rowDiv.appendChild(s);
        b.appendChild(rowDiv);
    }
}

function updateRow(){
    for(let i=0;i<4;i++){
        document.getElementById(`c-${row}-${i}`).textContent=guess[i]||"";
    }
}

function submit(){
    if(guess.length!==4 || over) return;

    /* âœ… MUTE USED LETTERS ON SUBMISSION */
    for(const letter of guess){
        if(!usedLetters.has(letter)){
            usedLetters.add(letter);
            muteKey(letter);
        }
    }

    let g=0,y=0;
    for(let i=0;i<4;i++){
        if(guess[i]===target[i]) g++;
        else if(target.includes(guess[i])) y++;
    }

    document.getElementById(`g-${row}`).textContent=g;
    document.getElementById(`y-${row}`).textContent=y;
    if(g) document.getElementById(`g-${row}`).classList.add("green");
    if(y) document.getElementById(`y-${row}`).classList.add("yellow");

    if(g===4 || row===MAX-1){
        document.getElementById("answerBar").innerHTML=`The word was <strong>${target}</strong>`;
        document.getElementById("nextBtn").classList.add("show");
        over=true;
        return;
    }

    row++;
    guess="";
}

function input(k){
    if(over) return;
    if(k==="ENTER") submit();
    else if(k==="âŒ«"){
        guess = guess.slice(0,-1);
        updateRow();
    }
    else if(/^[A-Z]$/.test(k) && guess.length<4){
        guess += k;
        updateRow();
    }
}

/* ===== KEYBOARD HELPERS ===== */
function muteKey(letter){
    document.querySelectorAll(".key").forEach(k=>{
        if(k.textContent === letter){
            k.classList.add("used");
        }
    });
}

function resetKeyboard(){
    document.querySelectorAll(".key").forEach(k=>{
        k.classList.remove("used");
    });
}

document.querySelectorAll(".key").forEach(k=>k.onclick=()=>input(k.textContent));
document.addEventListener("keydown",e=>input(e.key.toUpperCase()));
</script>

</body>
</html>
